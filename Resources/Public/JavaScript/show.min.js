(function(){function q(){var b=f.value,a=new FormData;a.append("searchText",b);fetch("/",{method:"POST",body:a}).then(function(d){return d.json()}).then(function(d){if(c&&0<d.length){for(var t=parseInt(c.value,10);1<c.options.length;)c.remove(1);var r=!1;d.forEach(function(g){g.value===t&&(r=g.selected=!0);var h=document.createElement("option");h.value=g.value;h.textContent=g.label;h.selected=g.selected;c.appendChild(h)});r||(c.options[0].selected=!0)}n();k()})["catch"](function(d){console.error("Error:",d)})}function n(){l.disabled=!e[1].checked;l.required=e[1].checked}function p(){var b=parseInt(m.value,10);e.forEach(function(a){a.required=!0;if(a.checked&&0===parseInt(a.value,10)){var d=a.getAttribute("data-validation");a.setCustomValidity(d)}else a.setCustomValidity("")});3<b?e.forEach(function(a){a.required=!0}):e.forEach(function(a){a.required=!1;a.setCustomValidity("")})}function u(b){b.target.checkValidity()||b.preventDefault();var a=parseInt(c.value,10);isNaN(a)||0===a?(a=c.getAttribute("data-validation"),c.setCustomValidity(a),b.preventDefault()):c.setCustomValidity("")}function k(){var b=parseInt(document.querySelector('input[name="tx_partnerrating_pi1[reason]"]:checked').value,10);0===parseInt(c.value,10)&&0!==b?(b=c.getAttribute("data-validation"),c.setCustomValidity(b)):c.setCustomValidity("")}function v(){var b=window.location.href,a=b.indexOf("/saved/");-1!==a&&history.replaceState(null,"",b.substring(0,a))}var f,c,l,e,m;document.addEventListener("DOMContentLoaded",function(){var b=document.querySelector(".tx_partnerrating");b?(e=b.querySelectorAll('input[name="tx_partnerrating_pi1[reason]"]'),l=b.querySelector('textarea[name="tx_partnerrating_pi1[reasonText]"]'),f=b.querySelector('input[name="tx_partnerrating_pi1[partnerSearch]"]'),c=b.querySelector('select[name="tx_partnerrating_pi1[partner]"]'),m=b.querySelector('select[name="tx_partnerrating_pi1[rating]"]'),b=b.querySelector("form"),f&&c&&f.addEventListener("input",q),e&&l&&e.forEach(function(a){a.addEventListener("change",n);a.addEventListener("change",p);a.addEventListener("change", k)}),m&&m.addEventListener("change",p),c&&c.addEventListener("change",k),b&&b.addEventListener("submit",u),""!==f.value&&q(),n(),p(),k(),v()):console.error("DOM elements not found.")})})();