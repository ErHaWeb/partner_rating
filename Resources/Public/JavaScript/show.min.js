(function(){function r(){var b=e.value,a=new FormData;a.append("searchText",b);fetch("/",{method:"POST",body:a}).then(function(f){return f.json()}).then(function(f){if(c&&0<f.length){for(var u=parseInt(c.value,10);1<c.options.length;)c.remove(1);var t=!1;f.forEach(function(g){g.value===u&&(t=g.selected=!0);var k=document.createElement("option");k.value=g.value;k.textContent=g.label;k.selected=g.selected;c.appendChild(k)});t||(c.options[0].selected=!0)}p();l()})["catch"](function(f){console.error("Error:",f)})}function p(){m.disabled=!d[1].checked;m.required=d[1].checked}function q(){var b;h.forEach(function(a){a.checked&&(b=parseInt(a.value,10))});d.forEach(function(a){a.required=!0;if(a.checked&&0===parseInt(a.value,10)){var f=a.getAttribute("data-validation");a.setCustomValidity(f)}else a.setCustomValidity("")});3<b?d.forEach(function(a){a.required=!0}):d.forEach(function(a){a.required=!1;a.setCustomValidity("")})}function v(b){b.target.checkValidity()||b.preventDefault();var a=parseInt(c.value,10);isNaN(a)||0===a?(a=c.getAttribute("data-validation"),c.setCustomValidity(a),b.preventDefault()):c.setCustomValidity("")}function l(){var b=parseInt(c.value,10),a=parseInt(document.querySelector('input[name="tx_partnerrating_pi1[reason]"]:checked').value,10);0===b&&0!==a?(b=c.getAttribute("data-validation"),c.setCustomValidity(b)):c.setCustomValidity("")}function w(){var b=window.location.href,a=b.indexOf("/saved/");-1!==a&&(b=b.substring(0,a),history.replaceState(null,"",b))}function x(){setTimeout(function(){n.classList.remove("show");n.classList.add("d-none");e.focus()},3E3)}var e,c,m,d,h,n;document.addEventListener("DOMContentLoaded",function(){var b=document.querySelector(".tx_partnerrating");b?(d=b.querySelectorAll('input[name="tx_partnerrating_pi1[reason]"]'),m=b.querySelector('textarea[name="tx_partnerrating_pi1[reasonText]"]'),e=b.querySelector('input[name="tx_partnerrating_pi1[partnerSearch]"]'),c=b.querySelector('select[name="tx_partnerrating_pi1[partner]"]'),h=b.querySelectorAll('input[name="tx_partnerrating_pi1[rating]"]'),n=b.querySelector(".saved-rating-alert"),b=b.querySelector("form"),e&&c&&(e.addEventListener("input",r),""!==e.value&&r(),e.focus()),d&&m&&(d.forEach(function(a){a.addEventListener("change",p)}),p()),h&&d&&(d.forEach(function(a){a.addEventListener("change",q)}),h.forEach(function(a){a.addEventListener("change",q)}),q()),h&&d&&c&&d.forEach(function(a){a.addEventListener("change",l)}),c&&(c.addEventListener("change",l),l()),b&&b.addEventListener("submit",v),e&&n&&x(),w()):console.error("DOM elements not found.")})})();