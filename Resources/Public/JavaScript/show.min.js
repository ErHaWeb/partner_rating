(function(){function t(){var b=e.value,a=new FormData;a.append("searchText",b);fetch("/",{method:"POST",body:a}).then(function(f){return f.json()}).then(function(f){if(!u||c&&0<f.length){for(var w=parseInt(c.value,10);1<c.options.length;)c.remove(1);var v=!1;f.forEach(function(h){h.value===w&&(v=h.selected=!0);var l=document.createElement("option");l.value=h.value;l.textContent=h.label;l.selected=h.selected;c.appendChild(l)});v||(c.options[0].selected=!0)}p();m()})["catch"](function(f){console.error("Error:",f)})}function p(){g.disabled=!0;g.required=!1;d.forEach(function(b){"-1"===b.value&&b.checked&&(g.disabled=!1,g.required=!0)})}function q(){var b;k.forEach(function(a){a.checked&&(b=parseInt(a.value,10))});d.forEach(function(a){a.required=!0;if(a.checked&&0===parseInt(a.value,10)){var f=a.getAttribute("data-validation");a.setCustomValidity(f)}else a.setCustomValidity("")});0!==r&&b>r?d.forEach(function(a){a.required=!0}):d.forEach(function(a){a.required=!1;a.setCustomValidity("")})}function x(b){b.target.checkValidity()||b.preventDefault();var a=parseInt(c.value,10);isNaN(a)||0===a?(a=c.getAttribute("data-validation"),c.setCustomValidity(a),b.preventDefault()):c.setCustomValidity("")}function m(){var b=parseInt(c.value,10),a=parseInt(document.querySelector('input[name="tx_partnerrating_pi1[reason]"]:checked').value,10);0===b&&0!==a?(b=c.getAttribute("data-validation"),c.setCustomValidity(b)):c.setCustomValidity("")}function y(){var b=window.location.href,a=b.indexOf("/saved/");-1!==a&&(b=b.substring(0,a),history.replaceState(null,"",b))}function z(){setTimeout(function(){n.classList.remove("show");n.classList.add("d-none");e.focus()},3E3)}var e,c,g,d,k,n,r=0,u=!1;document.addEventListener("DOMContentLoaded",function(){var b=document.querySelector(".tx_partnerrating");b?(d=b.querySelectorAll('input[name="tx_partnerrating_pi1[reason]"]'),g=b.querySelector('textarea[name="tx_partnerrating_pi1[reasonText]"]'),e=b.querySelector('input[name="tx_partnerrating_pi1[partnerSearch]"]'),c=b.querySelector('select[name="tx_partnerrating_pi1[partner]"]'),k=b.querySelectorAll('input[name="tx_partnerrating_pi1[rating]"]'),n=b.querySelector(".saved-rating-alert"),b=b.querySelector("form"),r=parseInt(b.getAttribute("data-rating-reason-min-value"),10),u="1"===b.getAttribute("data-keep-min-one-search-result"),e&&c&&(e.addEventListener("input",t),""!==e.value&&t(),e.focus()),d&&g&&(d.forEach(function(a){a.addEventListener("change",p)}),p()),k&&d&&(d.forEach(function(a){a.addEventListener("change",q)}),k.forEach(function(a){a.addEventListener("change",q)}),q()),k&&d&&c&&d.forEach(function(a){a.addEventListener("change",m)}),c&&(c.addEventListener("change",m),m()),b&&b.addEventListener("submit",x),e&&n&&z(),y()):console.error("DOM elements not found.")})})();